<body>
    <canvas id="lightning-canvas"></canvas>
    <script>
        const canvas = document.getElementById("lightning-canvas");
        const ctx = canvas.getContext("2d");

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        function drawLightning(x1, y1, x2, y2, branchDepth) {
            const length = Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);
            const angle = Math.atan2(y2 - y1, x2 - x1);

            ctx.strokeStyle = "white";
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.stroke();

            if (length > 10 && branchDepth > 0) {
                const branchCount = Math.floor(Math.random() * 4) + 2;
                const branchAngle = Math.PI / 6;

                for (let i = 0; i < branchCount; i++) {
                    const branchLength = length * (0.6 + Math.random() * 0.2);
                    const branchX2 = x2 + branchLength * Math.cos(angle + (i - (branchCount - 1) / 2) * branchAngle);
                    const branchY2 = y2 + branchLength * Math.sin(angle + (i - (branchCount - 1) / 2) * branchAngle);
                    drawLightning(x2, y2, branchX2, branchY2, branchDepth - 1);
                }
            }
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const startX = Math.random() * canvas.width;
            drawLightning(startX, canvas.height, startX, canvas.height - 200, 4);
            requestAnimationFrame(animate);
        }

        animate();
    </script>
</body>